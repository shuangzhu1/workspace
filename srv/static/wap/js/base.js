function checkField(e,t,n){var r=$(e).val();if(""==$(e).val())return $(e).siblings(".tip").css({display:"block"}),$(e).siblings(".tip").html("不能为空"),!1;if(n){if(!new RegExp(n).test(r))return $(e).siblings(".tip").css({display:"block"}),$(e).siblings(".tip").html(t||"格式不正确"),!1;$(e).siblings(".tip").css({display:"none"}),$(e).siblings(".tip").html("")}return $(e).siblings(".tip").css({display:"none"}),$(e).siblings(".tip").html(""),!0}function is_weixin(e){var t=navigator.userAgent.toLowerCase(),n=/.*(micromessenger)\/([\w.]+).*/.exec(t);if(n&&"micromessenger"===n[1]){if(!e)return!0;if(parseFloat(n[2])>=5)return!0}return!1}function is_weibo(e){var t=navigator.userAgent.toLowerCase(),n=/.*(weibo)\/([\w.]+).*/.exec(t);return!(!n||"weibo"!==n[1])}function datepicker(){function e(){$("#birthday").val("0000-00-00");var e=parseInt($("#selectYear").val()),t=parseInt($("#selectMonth").val());if(!e||!t)return!1;var n=[0,31,28,31,30,31,30,31,31,30,31,30,31];2==t&&(e%100==0&&e%400==0||e%100!=0&&e%4==0)&&n[2]++;for(var r='<option value="">日期</option>',i=1;i<=n[t];i++)r+="<option value='"+(i=i<10?"0"+i:i)+"'>"+i+"</option>";$("#selectDay").html(r)}$("#selectYear").on("change",function(){e()}),$("#selectMonth").on("change",function(){e()}),$("#selectDay").on("change",function(){var e=$("#selectYear").val(),t=$("#selectMonth").val(),n=$("#selectDay").val();$("#birthday").val(e+"-"+t+"-"+n)})}function wechatImagePreview(e){if(void 0===window.WeixinJSBridge)return!1;$(e+" img").live("click",function(){var t=$(this).attr("src"),n=$(e).find("img"),r=[];$(n).each(function(){var e=this.src;e&&e.length>0&&r.push(e)}),WeixinJSBridge.invoke("imagePreview",{current:t,urls:r})})}function checkLogin(e){var t=app._uid;return!isNaN(t)&&t>0?(e(),!0):($(".dis_login").click(function(e){e.stopPropagation()}),$(".popup_window").click(function(e){$(".popup_window").hide()}),$(".popup_window").show(),do_login(e),!1)}function do_login(e){$("#loginForm :input").blur(function(){if($(this).parent().next().removeClass("error").text(""),$(this).is("#tel")){var e=$(this).val(),t=/^1[3|4|5|7|8]\d{9}$/;if(""==this.value){r="请输入手机号";$(this).parent().next().addClass("error").text(r)}else if(!t.test(e)){r="手机号输入不正确";$(this).parent().next().addClass("error").text(r)}}if($(this).is("#pwd")){var n=$(this).val(),t=/^[a-zA-Z0-9!"\#$%&'()*+,-./:;<=>?@\[\\\]^_`\{\|\}\~]{6,18}$/;if(""==this.value){r="请输入密码";$(this).parent().next().addClass("error").text(r)}else if(!t.test(n)){var r="密码输入不正确";$(this).parent().next().addClass("error").text(r)}}}),$("#mylogin").on("click",function(){if($("#loginForm :input").trigger("blur"),$("#loginForm .error").length)return!1;var t=$("#tel").val(),n=$("#pwd").val();requestApi("/api/user/AjaxLogin",{phone:t,pass:n},function(t){1==t.result&&($(".popup_window").hide(),app._uid=t.data.uid,e())})})}define(function(require,exports){function e(){}function t(e){this.widget=e||".popup-widget";var t=this;$(".popup-widget .popup-close").on("click",function(){t.hide()}),$(".popup-bg").on("click",function(){t.hide()})}window.inAjaxProcess=!1,e.ajaxTimer=null,e.tip=null,e.time=0,e.status=null,e.prototype={showTip:function(t,n,r,i){e.status=t,e.tip=n,e.time=r,$("#ajaxStatus").show(),$("#ajaxStatus #ajaxTip").html(e.tip).removeClass().addClass(e.status),e.time&&(e.ajaxTimer&&clearTimeout(e.ajaxTimer),e.ajaxTimer=setTimeout(function(){$("#ajaxStatus").hide(),e.inProcess=!0,"function"==typeof i&&i()},e.time))},hideTip:function(){$("#ajaxStatus").hide()}},window.tip=new e,showPop=function(e){new t(e).show()},hidePop=function(e){new t(e).hide()},t.prototype={show:function(){$(this.widget).fadeIn(),$(".popup-bg").fadeIn()},hide:function(){$(".popup-widget").hide(),$(".popup-bg").hide()}},exports.showTip=function(t,n,r,i){(new e).showTip(t,n,r,i)},exports.requestApi=function(t,n,r,i,o,a,u){if(i&&(window.inAjaxProcess=!1),!inAjaxProcess){var c={url:t,async:!0,data:n,dataType:u?"jsonp":"json",type:"post",beforeSend:function(){if(o||tip.showTip("wait","处理请求..."),window.inAjaxProcess)return tip.showTip("wait","正在请求..."),!1;window.inAjaxProcess=!0},timeout:function(){tip.showTip("err","请求超时,请重试！",2e3)},abort:function(){tip.showTip("err","网路连接被中断！",2e3)},parsererror:function(){tip.showTip("err","运行时发生错误！",2e3)},error:function(){window.inAjaxProcess&&e.time>1e3&&tip.showTip("err","运行错误，请重试！",2e3)},complete:function(){setTimeout(function(){"none"!==$("#ajaxStatus").css("display")&&tip.hideTip(),window.inAjaxProcess=!1},e.time)},success:function(e){"function"==typeof r&&r(e),1!=e.result&&(a?(a.html(e.error.msg),setTimeout(function(){a.html(" ")},2e3)):tip.showTip("err",e.error.more?e.error.msg+"["+e.error.more+"]":e.error.msg,3e3))}};$.ajax(c)}}});var JSON=JSON||{};JSON.stringify=JSON.stringify||function(e){var t=typeof e;if("object"!=t||null===e)return"string"==t&&(e='"'+e+'"'),String(e);var n,r,i=[],o=e&&e.constructor==Array;for(n in e)"string"==(t=typeof(r=e[n]))?r='"'+r+'"':"object"==t&&null!==r&&(r=JSON.stringify(r)),i.push((o?"":'"'+n+'":')+String(r));return(o?"[":"{")+String(i)+(o?"]":"}")},function($){$.fn.serializeObject=function(){var e=this,t={},n={},r={validate:/^[a-zA-Z][a-zA-Z0-9_]*(?:\[(?:\d*|[a-zA-Z0-9_]+)\])*$/,key:/[a-zA-Z0-9_]+|(?=\[\])/g,push:/^$/,fixed:/^\d+$/,named:/^[a-zA-Z0-9_]+$/};return this.build=function(e,t,n){return e[t]=n,e},this.push_counter=function(e){return void 0===n[e]&&(n[e]=0),n[e]++},$.each($(this).serializeArray(),function(){if(r.validate.test(this.name)){for(var n,i=this.name.match(r.key),o=this.value,a=this.name;void 0!==(n=i.pop());)a=a.replace(new RegExp("\\["+n+"\\]$"),""),n.match(r.push)?o=e.build([],e.push_counter(a),o):n.match(r.fixed)?o=e.build([],n,o):n.match(r.named)&&(o=e.build({},n,o));t=$.extend(!0,t,o)}}),t}}($),JSON.parse=JSON.parse||function(str){return""===str&&(str='""'),eval("var p="+str+";"),p},function(e){"use strict";var t,n=e.Base64;"undefined"!=typeof module&&module.exports&&(t=require("buffer").Buffer);var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=function(e){for(var t={},n=0,r=e.length;n<r;n++)t[e.charAt(n)]=n;return t}(r),o=String.fromCharCode,a=function(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?o(192|t>>>6)+o(128|63&t):o(224|t>>>12&15)+o(128|t>>>6&63)+o(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return o(240|t>>>18&7)+o(128|t>>>12&63)+o(128|t>>>6&63)+o(128|63&t)},u=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,c=function(e){return e.replace(u,a)},s=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[r.charAt(n>>>18),r.charAt(n>>>12&63),t>=2?"=":r.charAt(n>>>6&63),t>=1?"=":r.charAt(63&n)].join("")},f=e.btoa?function(t){return e.btoa(t)}:function(e){return e.replace(/[\s\S]{1,3}/g,s)},h=t?function(e){return new t(e).toString("base64")}:function(e){return f(c(e))},l=function(e,t){return t?h(e).replace(/[+\/]/g,function(e){return"+"==e?"-":"_"}).replace(/=/g,""):h(e)},p=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),d=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return o(55296+(t>>>10))+o(56320+(1023&t));case 3:return o((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return o((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},g=function(e){return e.replace(p,d)},m=function(e){var t=e.length,n=t%4,r=(t>0?i[e.charAt(0)]<<18:0)|(t>1?i[e.charAt(1)]<<12:0)|(t>2?i[e.charAt(2)]<<6:0)|(t>3?i[e.charAt(3)]:0),a=[o(r>>>16),o(r>>>8&255),o(255&r)];return a.length-=[0,0,2,1][n],a.join("")},w=e.atob?function(t){return e.atob(t)}:function(e){return e.replace(/[\s\S]{1,4}/g,m)},b=t?function(e){return new t(e,"base64").toString()}:function(e){return g(w(e))},A=function(e){return b(e.replace(/[-_]/g,function(e){return"-"==e?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))};if(e.Base64={VERSION:"2.1.4",atob:w,btoa:f,fromBase64:A,toBase64:l,utob:c,encode:l,encodeURI:function(e){return l(e,!0)},btou:g,decode:A,noConflict:function(){var t=e.Base64;return e.Base64=n,t}},"function"==typeof Object.defineProperty){var v=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};e.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",v(function(){return A(this)})),Object.defineProperty(String.prototype,"toBase64",v(function(e){return l(this,e)})),Object.defineProperty(String.prototype,"toBase64URI",v(function(){return l(this,!0)}))}}}(this),function(e){"use strict";var t,n,r,i,o,a,u,c,s,f,h,l,p,d,g,m,w,b,A,v,x,C=e.base64;"undefined"!=typeof module&&module.exports&&(t=require("buffer").Buffer),r=function(e){var t,n,r={};for(t=0,n=e.length;n>t;t++)r[e.charAt(t)]=t;return r}(n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),i=String.fromCharCode,o=function(e){var t;return e.length<2?128>(t=e.charCodeAt(0))?e:2048>t?i(192|t>>>6)+i(128|63&t):i(224|15&t>>>12)+i(128|63&t>>>6)+i(128|63&t):(t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320),i(240|7&t>>>18)+i(128|63&t>>>12)+i(128|63&t>>>6)+i(128|63&t))},a=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,u=function(e){return e.replace(a,o)},c=function(e){var t=[0,2,1][e.length%3],r=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[n.charAt(r>>>18),n.charAt(63&r>>>12),t>=2?"=":n.charAt(63&r>>>6),t>=1?"=":n.charAt(63&r)].join("")},s=e.btoa?function(t){return e.btoa(t)}:function(e){return e.replace(/[\s\S]{1,3}/g,c)},f=t?function(e){return new t(e).toString("base64")}:function(e){return s(u(e))},h=function(e,t){return t?f(e).replace(/[+\/]/g,function(e){return"+"==e?"-":"_"}).replace(/=/g,""):f(e)},l=function(e){return h(e,!0)},p=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),d=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return i(55296+(t>>>10))+i(56320+(1023&t));case 3:return i((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return i((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},g=function(e){return e.replace(p,d)},m=function(e){var t=e.length,n=t%4,o=(t>0?r[e.charAt(0)]<<18:0)|(t>1?r[e.charAt(1)]<<12:0)|(t>2?r[e.charAt(2)]<<6:0)|(t>3?r[e.charAt(3)]:0),a=[i(o>>>16),i(255&o>>>8),i(255&o)];return a.length-=[0,0,2,1][n],a.join("")},w=e.atob?function(t){return e.atob(t)}:function(e){return e.replace(/[\s\S]{1,4}/g,m)},b=t?function(e){return new t(e,"base64").toString()}:function(e){return g(w(e))},A=function(e){return b(e.replace(/[-_]/g,function(e){return"-"==e?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},v=function(){var t=e.base64;return e.base64=C,t},e.base64={VERSION:"2.1.4",atob:w,btoa:s,fromBase64:A,toBase64:h,utob:u,encode:h,encodeURI:l,btou:g,decode:A,noConflict:v},"function"==typeof Object.defineProperty&&(x=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}},e.base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",x(function(){return A(this)})),Object.defineProperty(String.prototype,"toBase64",x(function(e){return h(this,e)})),Object.defineProperty(String.prototype,"toBase64URI",x(function(){return h(this,!0)}))})}($),window.loadMore=function(e,t){var n=1;$(".ui-refresh .ui-refresh-down").on("click",function(){t.page=n,$(".ui-refresh .ui-refresh-down").html("<img src='/static/home/images/loading.gif'>"),requestApi(e,t,function(e){1==e.result&&($("#ajaxStatus").hide(),n++,""==e.data?$(".ui-refresh .ui-refresh-down").html("没有更多内容了").unbind("click"):($(".ui-refresh .ui-refresh-down").html("加载更多"),$(".ui-refresh .data-list").append(e.data),window.baguetteBox&&baguetteBox.run(".gallery"),window.refreshSwiper&&seajs.use("tools/swiper.js",function(){$.each($(".item-swiper"),function(e,t){var n="#"+$(t).attr("id");new Swiper(n,{pagination:n+" > .pagination",paginationClickable:!0,calculateHeight:!0,resizeReInit:!0,caculateHeight:!0})})})))})}),$(".ui-refresh .comment_reply_load_more").on("click",function(){t.page=n,$(".ui-refresh .comment_reply_load_more").html("<img src='/static/home/images/loading.gif'>"),requestApi(e,t,function(e){1==e.result&&($("#ajaxStatus").hide(),n++,""==e.data?$(".ui-refresh .comment_reply_load_more").html("没有更多内容了").unbind("click"):($(".ui-refresh .comment_reply_load_more").html("加载更多"),$(".ui-refresh .data-list").append(e.data),window.baguetteBox&&baguetteBox.run(".gallery")))})})},window.loadInit=function(e,t){var n=0;t.page=n,$.ajax({type:"post",dataType:"json",url:e,data:t,success:function(r){1==r.result&&($("#ajaxStatus").hide(),n++,""==r.data?($(".ui-refresh .data-list").html(""),$(".ui-refresh .ui-refresh-down").html("没有更多内容了").unbind("click")):($(".ui-refresh .data-list").html(r.data),$(".ui-refresh .ui-refresh-down").html("加载更多"),loadMore(e,t)))}})},$.base64=function($){function e(e,t){var n=r.indexOf(e.charAt(t));if(-1===n)throw"Cannot decode base64";return n}function t(e,t){var n=e.charCodeAt(t);if(n>255)throw"INVALID_CHARACTER_ERR: DOM Exception 5";return n}var n="=",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";return{decode:function(t){var r,i,o=0,a=t.length,u=[];if(t=String(t),0===a)return t;if(a%4!=0)throw"Cannot decode base64";for(t.charAt(a-1)===n&&(o=1,t.charAt(a-2)===n&&(o=2),a-=4),r=0;r<a;r+=4)i=e(t,r)<<18|e(t,r+1)<<12|e(t,r+2)<<6|e(t,r+3),u.push(String.fromCharCode(i>>16,i>>8&255,255&i));switch(o){case 1:i=e(t,r)<<18|e(t,r+1)<<12|e(t,r+2)<<6,u.push(String.fromCharCode(i>>16,i>>8&255));break;case 2:i=e(t,r)<<18|e(t,r+1)<<12,u.push(String.fromCharCode(i>>16))}return u.join("")},encode:function(e){if(1!==arguments.length)throw"SyntaxError: exactly one argument required";var i,o,a=[],u=(e=String(e)).length-e.length%3;if(0===e.length)return e;for(i=0;i<u;i+=3)o=t(e,i)<<16|t(e,i+1)<<8|t(e,i+2),a.push(r.charAt(o>>18)),a.push(r.charAt(o>>12&63)),a.push(r.charAt(o>>6&63)),a.push(r.charAt(63&o));switch(e.length-u){case 1:o=t(e,i)<<16,a.push(r.charAt(o>>18)+r.charAt(o>>12&63)+n+n);break;case 2:o=t(e,i)<<16|t(e,i+1)<<8,a.push(r.charAt(o>>18)+r.charAt(o>>12&63)+r.charAt(o>>6&63)+n)}return a.join("")},VERSION:"1.0"}}($),$(function(){$(window).scroll(function(){$(window).scrollTop()>600?$(".all-goTop").fadeIn("fast"):$(".all-goTop").fadeOut("fast")}),$(".all-goTop").click(function(){$(window).scrollTop(0)})}),$.cookie=function(e,t,n){if(void 0===t){var r=null;if(document.cookie&&""!=document.cookie)for(var i=document.cookie.split(";"),o=0;o<i.length;o++){var a=$.trim(i[o]);if(a.substring(0,e.length+1)==e+"="){r=decodeURIComponent(a.substring(e.length+1));break}}return r}n=n||{},null===t&&(t="",n.expires=-1);var u="";if(n.expires&&("number"==typeof n.expires||n.expires.toUTCString)){var c;"number"==typeof n.expires?(c=new Date).setTime(c.getTime()+24*n.expires*60*60*1e3):c=n.expires,u="; expires="+c.toUTCString()}var s=n.path?"; path="+n.path:"",f=n.domain?"; domain="+n.domain:"",h=n.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(t),u,s,f,h].join("")},window.Popup=function(e){layer.open({content:e,skin:"msg",time:2})};